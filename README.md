# Audio & Music Manager

## Why videogames use sound?
Sound design and music play an important role in the overall experience of modern videogames. Game audio can help designers to create tension, add emotion, build immersion in the game world.

## Types of audios
* Background Music: Usually a loop sound, used to add interest to diferents moments of the game. Can be very varied, for example epic music in great enemies or relaxing one while player is exploring.
* Dialog Audio: Find when talking with NPC or sometimes listen from the storyteller.
* FX Audio: Sounds effects generated by the enviroment. For example when the player walk through the water a sound is played for a short amount of time. Very usefull to create a more realistic world.
* Foley Audio: Any sound or effect that the player create, is made to give feedback of what are you doing to the player. For example the jump sound.
* Spot Audio: Less frequent than others, used to create a sound with an specific origin. The playen can only listen this music if is near the origin. For example and NPC playing a piano.

### Examples
* Obtain an item: https://user-images.githubusercontent.com/79161175/160276089-d27d6301-d52e-45e8-aa62-3810fa544271.mp4
* Walksteps: https://user-images.githubusercontent.com/79161175/160276097-a180f19a-034a-405f-9e11-ad2bbb177199.mp4

## Every entity can potentially generate sound
All static and dynamic entities can generate sound, someones by themselves and other only when an interaction happens. This sound usually are FX.
* In that case is important to be clean and to asign each sound to his generator. Example the jump sound that player makes:
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen1.png)

* Ones asign implement it in update:
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen2.png)

## Discard entities that are too far
In the case of the spot sounds it's crucial to check if the player is close to the origin to know if is supposed to be listn or not.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen3.png)

If the player enter in range of the sound, the music plays but if the player leave the range the music will stop. In some games they go forward and increase the volume of the music for the closer the player is.

## Check camera position to play the audio spatially
Some games only produce sound if the player camera is near the music origin. That's a good improvement for games where the camera is not linked to the player, example League of Legends.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen4.png)

To implement that feature is necesary to check if the origin is in the camera boudaries.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen5.png)

## Playlist with fading
Usually games use a playlist for background music instead of a single music. That's not always the correct option, is necesary to consider some things like the type of situacion when is going to be played. SDL_Mixer don't have a default playlist option, so I create a few funtions to be able to use playlists in games.
* First I made an array to store the songs one behind the other, as well as some functions to make it more accessible.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen6.png)
* Secondly we need a function to check if we have to pass to the next sound or not. Is important to add a fade in and a fade out to make less visiable the song change.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen7.png)
* At last I create a clock of 30 seconds to swap the song after that amount of time. The clock work with frames so if our games runs at 60, we need to enter a 1800 delay.
![Image](https://github.com/RubokiReuchi/Audio-Music-Manager/blob/main/wiki/Imagen8.png)

## Advices
It's important to check if a music already ringing to not play more than one music at the same time.

### References:
* https://www.acmi.net.au/stories-and-ideas/evolution-audio-videogames/
* https://frost.ics.uci.edu/ics62/BasicsofSoundDesignforVideoGames-MichaelCullen.pdf
